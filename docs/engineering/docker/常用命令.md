# 命令

systemctl命令是Linux系统服务管理器指令，它实际上将 service 和 chkconfig 这两个命令组合到一起
systemctl — Control the systemd system and service manager
其中ctl的意思是control，也就是控制

::: tip
编码开发微服务

上线部署容器化

时时刻刻要监控

devops
:::



## 帮助启动命令

| 作用             | 命令                       |
|----------------|--------------------------|
| 启动docker       | systemctl start docker   |
| 停止docker       | systemctl stop docker    |
| 重启docker       | systemctl restart docker |
| 查看docker状态     | systemctl status docker  |
| 开机启动           | systemctl enable docker  |
| 查看docker概要信息   | docker info              |
| 查看docker总体帮助文档 | docker --help            |
| 查看docker命令帮助文档 | docker 具体命令 --help       |

## 镜像命令

| 作用               | 命令                    | 参数                         |
|------------------|-----------------------|----------------------------|
| 列出本地主机上的镜像       | docker images         | -a：列出本地所有镜像<br/>-q：只显示镜像id |
| 搜索镜像             | docker search [name]  | --limit [num] 限制搜索数量       |
| 下载镜像             | docker pull [name]    | :[tag] 标签版本号               |
| 查看镜像/容器/数据卷所占的空间 | docker system df      |                            |
| 删除镜像             | docker rmi [imagesId] |                            |

| REPOSITORY | TAG     | IMAGE ID | CREATED | SIZE |
|------------|---------|----------|---------|------|
| 仓库镜像源      | 标签 /版本号 | 镜像ID     | 创建时间    | 大小   |

## 容器命令

+ `docker run` 创建一个新的容器
    + -name="容器新名字" 为容器指定一个名称：
    + -d:后台运行容器并返回容器ID,也即启动守护式容器（后台运行）
    + -i:以交互模式运行容器，通常与t同时使用
    + -t:为容器重新分配一个伪输入终端，通常与i同时使用；也即启动交互式容器（前台有伪终端，等待交互）
    + -P:随机端口映射，大写P
    + p:指定端口映射，小写p


+ `docker ps` 查看容器信息
    + -a:列出当前所有正在运行的容器+历史上运行过的
    + -l显示最近创建的容器。
    + -n:显示最近n个创建的容器。
    + -q:静默模式，只显示容器编号。


+ 退出容器
    + `exit` run进去容器，exit退出，容器停止
    + `ctrl+p+q` run进去容器，ctrl+p+q退出，容器不停止
+ 启动己停止运行的容器 docker start 容器ID或者容器名
+ 重启容器 docker restart 容器ID或者容器名
+ 停止容器 docker stop 容器ID或者容器名
+ 强制停止容器 docker kill 容器ID或容器名
+ 删除己停止的容器 docker rm
    + docker rm-f S(docker ps-a-q)
    + docker ps -a -q | xargs docker rm
+ 重要
  + 查看容器日志 `docker logs 容器id`
  + 查看容器内运行的进程 `docker top 容器id`
  + 查看容器内部细节 `docker inspect 容器id`
  + 进入正在运行的容器并以命令行交互
    + `docker exec -it 容器id bash `（exec 进入容器，exit 推出，不会使容器停止）
    + `docker attach 容器id `（attach 进入容器，exit 推出，会使容器停止）
  + 从容器内拷贝文件到主机上 `docker cp 容器id:容器路径 主机目录`
  + 导入和导出容器
    + export导出容器的内容留作为一个tar归档文件[对应import命令]
    + import从tar包中的内容创建一个新的文件系统再导入为镜像[对应export]
    + 案例 
      + docker export容器D>文件名.tar 
      + cat文件名.tar|docker import-镜像用户/镜像名：镜像版本号



## 面试题

+ 谈谈docker虚悬镜像是什么？
